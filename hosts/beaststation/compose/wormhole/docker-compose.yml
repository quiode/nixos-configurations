services:
  wormhole:
    restart: always
    container_name: wormhole
    image: registry.dominik-schwaiger.ch/quio/magic-wormhole-docker:latest
    volumes:
      - /ssd/critical/wormhole:/wormhole/data
    labels:
      traefik.enable: true
      traefik.docker.network: wormhole
      traefik.http.routers.wormhole-relay.rule: Host(`relay.wormhole.dominik-schwaiger.ch`)
      traefik.http.routers.wormhole-relay.tls: true
      traefik.http.routers.wormhole-relay.tls.certresolver: letsencrypt
      traefik.http.services.wormhole-relay.loadbalancer.server.port: 4000
      traefik.http.routers.wormhole-transit.rule: Host(`transit.wormhole.dominik-schwaiger.ch`)
      traefik.http.routers.wormhole-transit.tls: true
      traefik.http.routers.wormhole-transit.tls.certresolver: letsencrypt
      traefik.http.services.wormhole-transit.loadbalancer.server.port: 4001

networks:
  wormhole:
    name: wormhole
    external: true
